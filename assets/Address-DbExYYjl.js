import{_ as R,r as x,c as h,a as n,d as t,w as a,e as v,f as j,g as i,F as L,h as O,j as b,k as S,p as G,i as y,b as w,t as _,l as c,m as H,v as J,n as K,E as D,q as P}from"./index-By-KzjZm.js";const Q={class:"address-page"},W={class:"nav-header"},X={class:"address-list"},Y={class:"address-info"},Z={class:"user-info"},ee={class:"name"},le={class:"phone"},te={class:"address-text"},ae={class:"actions"},oe={class:"dialog-footer"},se={__name:"Address",setup(ne){const A=j(),p=x(!1),f=x(null),o=x({name:"",phone:"",region:[],detail:"",isDefault:!1}),B={name:[{required:!0,message:"请输入收货人姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],region:[{required:!0,message:"请选择所在地区",trigger:"change"}],detail:[{required:!0,message:"请输入详细地址",trigger:"blur"}]},d=x([{id:1,name:"张三",phone:"13800138000",province:"北京市",city:"北京市",district:"朝阳区",detail:"某某小区1号楼1单元101",isDefault:!0},{id:2,name:"李四",phone:"13900139000",province:"北京市",city:"北京市",district:"海淀区",detail:"某某花园2号楼3单元303",isDefault:!1}]),E=[{value:"北京市",label:"北京市",children:[{value:"北京市",label:"北京市",children:[{value:"朝阳区",label:"朝阳区"},{value:"海淀区",label:"海淀区"}]}]}],U=()=>{f.value=null,o.value={name:"",phone:"",region:[],detail:"",isDefault:!1},p.value=!0},$=s=>{f.value=s,o.value={name:s.name,phone:s.phone,region:[s.province,s.city,s.district],detail:s.detail,isDefault:s.isDefault},p.value=!0},q=()=>{var r;const[s,e,u]=o.value.region,k={id:((r=f.value)==null?void 0:r.id)||Date.now(),name:o.value.name,phone:o.value.phone,province:s,city:e,district:u,detail:o.value.detail,isDefault:o.value.isDefault};if(o.value.isDefault&&d.value.forEach(m=>m.isDefault=!1),f.value){const m=d.value.findIndex(g=>g.id===f.value.id);m!==-1&&(d.value[m]=k),D.success("地址修改成功")}else d.value.push(k),D.success("地址添加成功");p.value=!1},z=s=>{d.value.forEach(e=>e.isDefault=e.id===s.id),D.success("默认地址设置成功")},N=s=>{P.confirm("确定要删除该地址吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=d.value.findIndex(u=>u.id===s.id);e!==-1&&d.value.splice(e,1),D.success("地址删除成功")})};return(s,e)=>{const u=i("el-icon"),k=i("el-tag"),r=i("el-button"),m=i("el-card"),g=i("el-input"),V=i("el-form-item"),F=i("el-cascader"),I=i("el-checkbox"),T=i("el-form"),M=i("el-dialog");return b(),h("div",Q,[n("div",W,[t(u,{class:"back-icon",onClick:e[0]||(e[0]=l=>v(A).back())},{default:a(()=>[t(v(S))]),_:1}),e[8]||(e[8]=n("span",{class:"title"},"我的地址",-1)),t(u,{class:"add-icon",onClick:U},{default:a(()=>[t(v(G))]),_:1})]),n("div",X,[(b(!0),h(L,null,O(d.value,l=>(b(),y(m,{key:l.id,class:"address-item"},{default:a(()=>[n("div",Y,[n("div",Z,[n("span",ee,_(l.name),1),n("span",le,_(l.phone),1),l.isDefault?(b(),y(k,{key:0,size:"small",type:"success"},{default:a(()=>e[9]||(e[9]=[c("默认")])),_:1})):w("",!0)]),n("div",te,_(l.province)+_(l.city)+_(l.district)+_(l.detail),1)]),n("div",ae,[t(r,{type:"text",size:"small",onClick:C=>$(l)},{default:a(()=>[t(u,null,{default:a(()=>[t(v(H))]),_:1}),e[10]||(e[10]=c(" 编辑 "))]),_:2},1032,["onClick"]),l.isDefault?w("",!0):(b(),y(r,{key:0,type:"text",size:"small",onClick:C=>z(l)},{default:a(()=>[t(u,null,{default:a(()=>[t(v(J))]),_:1}),e[11]||(e[11]=c(" 设为默认 "))]),_:2},1032,["onClick"])),t(r,{type:"text",size:"small",onClick:C=>N(l)},{default:a(()=>[t(u,null,{default:a(()=>[t(v(K))]),_:1}),e[12]||(e[12]=c(" 删除 "))]),_:2},1032,["onClick"])])]),_:2},1024))),128))]),t(M,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=l=>p.value=l),title:f.value?"编辑地址":"新增地址",width:"90%",class:"mobile-dialog"},{footer:a(()=>[n("div",oe,[t(r,{onClick:e[6]||(e[6]=l=>p.value=!1)},{default:a(()=>e[14]||(e[14]=[c("取消")])),_:1}),t(r,{type:"primary",onClick:q},{default:a(()=>e[15]||(e[15]=[c("确定")])),_:1})])]),default:a(()=>[t(T,{ref:"formRef",model:o.value,rules:B,"label-position":"top"},{default:a(()=>[t(V,{label:"收货人",prop:"name"},{default:a(()=>[t(g,{modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.name=l),placeholder:"请输入收货人姓名"},null,8,["modelValue"])]),_:1}),t(V,{label:"手机号码",prop:"phone"},{default:a(()=>[t(g,{modelValue:o.value.phone,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.phone=l),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1}),t(V,{label:"所在地区",prop:"region"},{default:a(()=>[t(F,{modelValue:o.value.region,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.region=l),options:E,placeholder:"请选择所在地区",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(V,{label:"详细地址",prop:"detail"},{default:a(()=>[t(g,{modelValue:o.value.detail,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.detail=l),type:"textarea",rows:"3",placeholder:"请输入详细地址，如街道、门牌号等"},null,8,["modelValue"])]),_:1}),t(V,null,{default:a(()=>[t(I,{modelValue:o.value.isDefault,"onUpdate:modelValue":e[5]||(e[5]=l=>o.value.isDefault=l)},{default:a(()=>e[13]||(e[13]=[c("设为默认地址")])),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ue=R(se,[["__scopeId","data-v-20793309"]]);export{ue as default};
