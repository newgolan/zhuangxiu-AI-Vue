import{_ as h,r as d,c as A,a as s,d as l,w as o,e as x,f as G,g as i,j as H,k as J,t as V,l as f,q as $,E as v}from"./index-By-KzjZm.js";const O={class:"settings-page"},Q={class:"nav-header"},W={class:"settings-list"},X={class:"value-text"},Y={class:"value-text"},Z={class:"value-text"},ee={class:"value-text"},le={class:"logout-button"},oe={class:"code-input"},te={class:"dialog-footer"},se={class:"dialog-footer"},ae={__name:"Settings",setup(ne){const b=G(),N=d({name:"张三",phone:"138****8888"}),u=d({orderNotification:!0,promotionNotification:!0,systemNotification:!0,locationEnabled:!0}),q=d("1.0.0"),U=d("2.5MB"),c=d(!1),r=d({phone:"",code:""}),D={phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:/^\d{6}$/,message:"验证码格式不正确",trigger:"blur"}]},p=d(0),g=d(!1),n=d({oldPassword:"",newPassword:"",confirmPassword:""}),R={oldPassword:[{required:!0,message:"请输入原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码长度不能小于6位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入新密码",trigger:"blur"},{validator:(C,e,k)=>{e!==n.value.newPassword?k(new Error("两次输入的密码不一致")):k()},trigger:"blur"}]},S=()=>{if(!r.value.phone){v.warning("请先输入手机号码");return}p.value=60;const C=setInterval(()=>{p.value--,p.value<=0&&clearInterval(C)},1e3);v.success("验证码已发送")},T=()=>{v.success("手机号码修改成功"),c.value=!1},F=()=>{v.success("密码修改成功"),g.value=!1},I=()=>{r.value={phone:"",code:""},c.value=!0},M=()=>{n.value={oldPassword:"",newPassword:"",confirmPassword:""},g.value=!0},j=()=>{b.push("/privacy-settings")},z=()=>{$.confirm("确定要清除缓存吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{v.success("缓存已清除"),U.value="0KB"})},K=()=>{v.info("当前已是最新版本")},L=()=>{$.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{b.push("/login")})};return(C,e)=>{const k=i("el-icon"),a=i("el-cell"),P=i("el-cell-group"),y=i("el-switch"),m=i("el-button"),w=i("el-input"),_=i("el-form-item"),B=i("el-form"),E=i("el-dialog");return H(),A("div",O,[s("div",Q,[l(k,{class:"back-icon",onClick:e[0]||(e[0]=t=>x(b).back())},{default:o(()=>[l(x(J))]),_:1}),e[15]||(e[15]=s("span",{class:"title"},"设置",-1))]),s("div",W,[e[17]||(e[17]=s("div",{class:"section-title"},"账号设置",-1)),l(P,null,{default:o(()=>[l(a,{title:"个人信息","is-link":"",onClick:e[1]||(e[1]=t=>x(b).push("/profile/edit"))},{default:o(()=>[s("span",X,V(N.value.name),1)]),_:1}),l(a,{title:"手机号码","is-link":"",onClick:I},{default:o(()=>[s("span",Y,V(N.value.phone),1)]),_:1}),l(a,{title:"修改密码","is-link":"",onClick:M})]),_:1}),e[18]||(e[18]=s("div",{class:"section-title"},"通知设置",-1)),l(P,null,{default:o(()=>[l(a,{title:"订单通知"},{default:o(()=>[l(y,{modelValue:u.value.orderNotification,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value.orderNotification=t)},null,8,["modelValue"])]),_:1}),l(a,{title:"优惠活动通知"},{default:o(()=>[l(y,{modelValue:u.value.promotionNotification,"onUpdate:modelValue":e[3]||(e[3]=t=>u.value.promotionNotification=t)},null,8,["modelValue"])]),_:1}),l(a,{title:"系统通知"},{default:o(()=>[l(y,{modelValue:u.value.systemNotification,"onUpdate:modelValue":e[4]||(e[4]=t=>u.value.systemNotification=t)},null,8,["modelValue"])]),_:1})]),_:1}),e[19]||(e[19]=s("div",{class:"section-title"},"隐私设置",-1)),l(P,null,{default:o(()=>[l(a,{title:"位置信息"},{default:o(()=>[l(y,{modelValue:u.value.locationEnabled,"onUpdate:modelValue":e[5]||(e[5]=t=>u.value.locationEnabled=t)},null,8,["modelValue"])]),_:1}),l(a,{title:"个人信息授权","is-link":"",onClick:j})]),_:1}),e[20]||(e[20]=s("div",{class:"section-title"},"其他设置",-1)),l(P,null,{default:o(()=>[l(a,{title:"清除缓存","is-link":"",onClick:z},{default:o(()=>[s("span",Z,V(U.value),1)]),_:1}),l(a,{title:"检查更新","is-link":"",onClick:K},{default:o(()=>[s("span",ee,"当前版本 "+V(q.value),1)]),_:1})]),_:1}),s("div",le,[l(m,{type:"danger",onClick:L},{default:o(()=>e[16]||(e[16]=[f("退出登录")])),_:1})])]),l(E,{modelValue:c.value,"onUpdate:modelValue":e[9]||(e[9]=t=>c.value=t),title:"修改手机号码",width:"90%",class:"mobile-dialog"},{footer:o(()=>[s("div",te,[l(m,{onClick:e[8]||(e[8]=t=>c.value=!1)},{default:o(()=>e[21]||(e[21]=[f("取消")])),_:1}),l(m,{type:"primary",onClick:T},{default:o(()=>e[22]||(e[22]=[f("确定")])),_:1})])]),default:o(()=>[l(B,{model:r.value,rules:D,ref:"phoneFormRef"},{default:o(()=>[l(_,{label:"新手机号码",prop:"phone"},{default:o(()=>[l(w,{modelValue:r.value.phone,"onUpdate:modelValue":e[6]||(e[6]=t=>r.value.phone=t),placeholder:"请输入新手机号码"},null,8,["modelValue"])]),_:1}),l(_,{label:"验证码",prop:"code"},{default:o(()=>[s("div",oe,[l(w,{modelValue:r.value.code,"onUpdate:modelValue":e[7]||(e[7]=t=>r.value.code=t),placeholder:"请输入验证码"},null,8,["modelValue"]),l(m,{type:"primary",disabled:p.value>0,onClick:S},{default:o(()=>[f(V(p.value>0?`${p.value}s后重新发送`:"获取验证码"),1)]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(E,{modelValue:g.value,"onUpdate:modelValue":e[14]||(e[14]=t=>g.value=t),title:"修改密码",width:"90%",class:"mobile-dialog"},{footer:o(()=>[s("div",se,[l(m,{onClick:e[13]||(e[13]=t=>g.value=!1)},{default:o(()=>e[23]||(e[23]=[f("取消")])),_:1}),l(m,{type:"primary",onClick:F},{default:o(()=>e[24]||(e[24]=[f("确定")])),_:1})])]),default:o(()=>[l(B,{model:n.value,rules:R,ref:"passwordFormRef"},{default:o(()=>[l(_,{label:"原密码",prop:"oldPassword"},{default:o(()=>[l(w,{modelValue:n.value.oldPassword,"onUpdate:modelValue":e[10]||(e[10]=t=>n.value.oldPassword=t),type:"password",placeholder:"请输入原密码"},null,8,["modelValue"])]),_:1}),l(_,{label:"新密码",prop:"newPassword"},{default:o(()=>[l(w,{modelValue:n.value.newPassword,"onUpdate:modelValue":e[11]||(e[11]=t=>n.value.newPassword=t),type:"password",placeholder:"请输入新密码"},null,8,["modelValue"])]),_:1}),l(_,{label:"确认新密码",prop:"confirmPassword"},{default:o(()=>[l(w,{modelValue:n.value.confirmPassword,"onUpdate:modelValue":e[12]||(e[12]=t=>n.value.confirmPassword=t),type:"password",placeholder:"请再次输入新密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},ie=h(ae,[["__scopeId","data-v-93e0d092"]]);export{ie as default};
