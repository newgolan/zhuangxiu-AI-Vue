import{_ as I,r as V,c as x,a as o,d as t,w as l,e as p,f as N,g as u,F as T,h as R,j as w,k as S,p as j,i as A,t as v,l as _,m as L,s as G,n as H,E as b,q as J}from"./index-BIcR4TpE.js";const K={class:"department-page"},O={class:"nav-header"},P={class:"department-list"},Q={class:"department-info"},W={class:"department-header"},X={class:"department-name"},Y={class:"department-desc"},Z={class:"department-stats"},ee={class:"actions"},te={class:"dialog-footer"},ae={__name:"DepartmentMobile",setup(le){const y=N(),c=V(!1),r=V(null),n=V({name:"",description:"",manager:"",phone:"",status:"active"}),h={name:[{required:!0,message:"请输入部门名称",trigger:"blur"}],description:[{required:!0,message:"请输入部门描述",trigger:"blur"}],manager:[{required:!0,message:"请输入部门主管姓名",trigger:"blur"}],phone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}]},m=V([{id:1,name:"保洁部",description:"负责日常保洁、深度保洁等清洁服务",manager:"张三",phone:"13800138000",status:"active",workerCount:12},{id:2,name:"维修部",description:"负责水电维修、家具维修等维修服务",manager:"李四",phone:"13900139000",status:"active",workerCount:8},{id:3,name:"绿化部",description:"负责园林养护、绿植维护等绿化服务",manager:"王五",phone:"13700137000",status:"inactive",workerCount:6}]),D=()=>{r.value=null,n.value={name:"",description:"",manager:"",phone:"",status:"active"},c.value=!0},B=s=>{r.value=s,n.value={name:s.name,description:s.description,manager:s.manager,phone:s.phone,status:s.status},c.value=!0},$=()=>{var e,i;const s={id:((e=r.value)==null?void 0:e.id)||Date.now(),...n.value,workerCount:((i=r.value)==null?void 0:i.workerCount)||0};if(r.value){const g=m.value.findIndex(d=>d.id===r.value.id);g!==-1&&(m.value[g]=s),b.success("部门修改成功")}else m.value.push(s),b.success("部门添加成功");c.value=!1},U=s=>{s.status=s.status==="active"?"inactive":"active",b.success(`部门已${s.status==="active"?"启用":"停用"}`)},q=s=>{J.confirm("确定要删除该部门吗？删除后无法恢复。","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=m.value.findIndex(i=>i.id===s.id);e!==-1&&m.value.splice(e,1),b.success("部门删除成功")})};return(s,e)=>{const i=u("el-icon"),g=u("el-tag"),d=u("el-button"),z=u("el-card"),k=u("el-input"),f=u("el-form-item"),E=u("el-switch"),M=u("el-form"),F=u("el-dialog");return w(),x("div",K,[o("div",O,[t(i,{class:"back-icon",onClick:e[0]||(e[0]=a=>p(y).back())},{default:l(()=>[t(p(S))]),_:1}),e[8]||(e[8]=o("span",{class:"title"},"部门管理",-1)),t(i,{class:"add-icon",onClick:D},{default:l(()=>[t(p(j))]),_:1})]),o("div",P,[(w(!0),x(T,null,R(m.value,a=>(w(),A(z,{key:a.id,class:"department-item"},{default:l(()=>[o("div",Q,[o("div",W,[o("span",X,v(a.name),1),t(g,{size:"small",type:a.status==="active"?"success":"info"},{default:l(()=>[_(v(a.status==="active"?"正常":"停用"),1)]),_:2},1032,["type"])]),o("div",Y,v(a.description),1),o("div",Z,[o("span",null,"工人数量: "+v(a.workerCount),1),o("span",null,"主管: "+v(a.manager),1)])]),o("div",ee,[t(d,{type:"primary",size:"small",onClick:C=>B(a)},{default:l(()=>[t(i,null,{default:l(()=>[t(p(L))]),_:1}),e[9]||(e[9]=_(" 编辑 "))]),_:2},1032,["onClick"]),t(d,{type:a.status==="active"?"warning":"success",size:"small",onClick:C=>U(a)},{default:l(()=>[t(i,null,{default:l(()=>[t(p(G))]),_:1}),_(" "+v(a.status==="active"?"停用":"启用"),1)]),_:2},1032,["type","onClick"]),t(d,{type:"danger",size:"small",onClick:C=>q(a)},{default:l(()=>[t(i,null,{default:l(()=>[t(p(H))]),_:1}),e[10]||(e[10]=_(" 删除 "))]),_:2},1032,["onClick"])])]),_:2},1024))),128))]),t(F,{modelValue:c.value,"onUpdate:modelValue":e[7]||(e[7]=a=>c.value=a),title:r.value?"编辑部门":"新增部门",width:"90%",class:"mobile-dialog"},{footer:l(()=>[o("div",te,[t(d,{onClick:e[6]||(e[6]=a=>c.value=!1)},{default:l(()=>e[11]||(e[11]=[_("取消")])),_:1}),t(d,{type:"primary",onClick:$},{default:l(()=>e[12]||(e[12]=[_("确定")])),_:1})])]),default:l(()=>[t(M,{ref:"formRef",model:n.value,rules:h,"label-position":"top"},{default:l(()=>[t(f,{label:"部门名称",prop:"name"},{default:l(()=>[t(k,{modelValue:n.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>n.value.name=a),placeholder:"请输入部门名称"},null,8,["modelValue"])]),_:1}),t(f,{label:"部门描述",prop:"description"},{default:l(()=>[t(k,{modelValue:n.value.description,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value.description=a),type:"textarea",rows:"3",placeholder:"请输入部门描述"},null,8,["modelValue"])]),_:1}),t(f,{label:"部门主管",prop:"manager"},{default:l(()=>[t(k,{modelValue:n.value.manager,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value.manager=a),placeholder:"请输入部门主管姓名"},null,8,["modelValue"])]),_:1}),t(f,{label:"联系电话",prop:"phone"},{default:l(()=>[t(k,{modelValue:n.value.phone,"onUpdate:modelValue":e[4]||(e[4]=a=>n.value.phone=a),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),t(f,{label:"状态",prop:"status"},{default:l(()=>[t(E,{modelValue:n.value.status,"onUpdate:modelValue":e[5]||(e[5]=a=>n.value.status=a),"active-value":"active","inactive-value":"inactive","active-text":"启用","inactive-text":"停用"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},ne=I(ae,[["__scopeId","data-v-d1bead74"]]);export{ne as default};
