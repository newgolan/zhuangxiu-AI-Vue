import{_ as L,u as W,r as F,o as M,c as d,a as l,b as v,d as o,w as s,e as b,f as R,g as c,F as f,h as k,i as g,j as r,k as j,l as a,t as n,E as y}from"./index-By-KzjZm.js";const P={class:"work-order-detail"},$={class:"nav-header"},q={class:"detail-section"},z={class:"detail-section"},A=["href"],G={class:"detail-section"},H={class:"detail-section"},J={key:0,class:"detail-section"},K={class:"image-list"},Q={key:1,class:"bottom-actions"},U={__name:"WorkOrderDetail",setup(X){const w=R(),T=W().params.id,e=F({orderNumber:"WO202502230001",status:"processing",createTime:"2025-02-23 15:30",customerName:"张三",phone:"13800138000",address:"北京市朝阳区某小区1号楼1单元101",serviceType:"瓷砖美缝",appointmentTime:"2025-02-24 09:00",description:"厨房和卫生间的瓷砖需要美缝处理，面积约20平方米",records:[{time:"2025-02-23 15:30",type:"primary",content:"工单创建"},{time:"2025-02-23 16:00",type:"success",content:"师傅已接单"},{time:"2025-02-23 16:30",type:"warning",content:"联系客户确认时间"}],images:[]}),x=p=>({pending:"warning",processing:"primary",completed:"success"})[p]||"info",C=p=>({pending:"待处理",processing:"处理中",completed:"已完成"})[p]||"未知",N=()=>{e.value.status="processing",e.value.records.push({time:new Date().toLocaleString(),type:"primary",content:"开始处理工单"}),y.success("已开始处理工单")},D=()=>{y.info("图片上传功能开发中")},O=()=>{e.value.status="completed",e.value.records.push({time:new Date().toLocaleString(),type:"success",content:"工单处理完成"}),y.success("工单已完成")};return M(async()=>{console.log("获取工单详情:",T)}),(p,t)=>{const S=c("el-icon"),i=c("el-descriptions-item"),h=c("el-tag"),m=c("el-descriptions"),B=c("el-timeline-item"),V=c("el-timeline"),E=c("el-image"),_=c("el-button");return r(),d("div",P,[l("div",$,[o(S,{class:"back-icon",onClick:t[0]||(t[0]=u=>b(w).back())},{default:s(()=>[o(b(j))]),_:1}),t[1]||(t[1]=l("span",{class:"title"},"工单详情",-1))]),l("div",q,[t[2]||(t[2]=l("div",{class:"section-title"},"基本信息",-1)),o(m,{column:1,border:""},{default:s(()=>[o(i,{label:"工单号"},{default:s(()=>[a(n(e.value.orderNumber),1)]),_:1}),o(i,{label:"状态"},{default:s(()=>[o(h,{type:x(e.value.status)},{default:s(()=>[a(n(C(e.value.status)),1)]),_:1},8,["type"])]),_:1}),o(i,{label:"创建时间"},{default:s(()=>[a(n(e.value.createTime),1)]),_:1})]),_:1})]),l("div",z,[t[3]||(t[3]=l("div",{class:"section-title"},"客户信息",-1)),o(m,{column:1,border:""},{default:s(()=>[o(i,{label:"客户姓名"},{default:s(()=>[a(n(e.value.customerName),1)]),_:1}),o(i,{label:"联系电话"},{default:s(()=>[l("a",{href:"tel:"+e.value.phone},n(e.value.phone),9,A)]),_:1}),o(i,{label:"服务地址"},{default:s(()=>[a(n(e.value.address),1)]),_:1})]),_:1})]),l("div",G,[t[4]||(t[4]=l("div",{class:"section-title"},"服务信息",-1)),o(m,{column:1,border:""},{default:s(()=>[o(i,{label:"服务类型"},{default:s(()=>[a(n(e.value.serviceType),1)]),_:1}),o(i,{label:"预约时间"},{default:s(()=>[a(n(e.value.appointmentTime),1)]),_:1}),o(i,{label:"服务描述"},{default:s(()=>[a(n(e.value.description),1)]),_:1})]),_:1})]),l("div",H,[t[5]||(t[5]=l("div",{class:"section-title"},"处理记录",-1)),o(V,null,{default:s(()=>[(r(!0),d(f,null,k(e.value.records,u=>(r(),g(B,{key:u.time,timestamp:u.time,type:u.type},{default:s(()=>[a(n(u.content),1)]),_:2},1032,["timestamp","type"]))),128))]),_:1})]),e.value.images&&e.value.images.length?(r(),d("div",J,[t[6]||(t[6]=l("div",{class:"section-title"},"现场图片",-1)),l("div",K,[(r(!0),d(f,null,k(e.value.images,(u,I)=>(r(),g(E,{key:I,src:u,"preview-src-list":e.value.images,fit:"cover",class:"service-image"},null,8,["src","preview-src-list"]))),128))])])):v("",!0),e.value.status!=="completed"?(r(),d("div",Q,[e.value.status==="pending"?(r(),g(_,{key:0,type:"primary",onClick:N},{default:s(()=>t[7]||(t[7]=[a("开始处理")])),_:1})):e.value.status==="processing"?(r(),d(f,{key:1},[o(_,{type:"primary",onClick:D},{default:s(()=>t[8]||(t[8]=[a("上传照片")])),_:1}),o(_,{type:"success",onClick:O},{default:s(()=>t[9]||(t[9]=[a("完成工单")])),_:1})],64)):v("",!0)])):v("",!0)])}}},ee=L(U,[["__scopeId","data-v-302a406b"]]);export{ee as default};
